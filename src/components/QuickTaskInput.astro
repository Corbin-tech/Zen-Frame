---
---

<div 
  x-data="{ mode: 'task' }"
  class="mb-8 max-w-2xl mx-auto"
>
  <div class="flex gap-2">
    <div class="flex-1 relative">
      <input
        type="text"
        x-model="$store.quickTask.text"
        @keyup.enter="$store.quickTask.handleEnter(mode)"
        :placeholder="mode === 'task' ? 'Type task and press Enter...' : 'Type cluster name and press Enter...'"
        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
      />
    </div>
    <button
      @click="mode = mode === 'task' ? 'cluster' : 'task'"
      class="px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
      <span x-text="mode === 'task' ? 'Switch to Cluster' : 'Switch to Task'" class="hidden sm:inline"></span>
      <span x-text="mode === 'task' ? 'Cluster' : 'Task'" class="sm:hidden"></span>
    </button>
  </div>
</div>

<script>
  if (typeof window !== 'undefined') {
    document.addEventListener('alpine:init', () => {
      Alpine.store('quickTask', {
        text: '',
        handleEnter(mode) {
          if (this.text?.trim()) {
            if (mode === 'task') {
              window.Alpine.store('todos').addTodo(this.text.trim());
            } else {
              // Create a new cluster with this name
              window.Alpine.store('todos').createCluster(this.text.trim());
            }
            this.text = '';
          }
        }
      });
    });
  }
</script>
