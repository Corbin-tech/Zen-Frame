---
/*
 * Zen Quote Component
 * Displays inspirational quotes to users:
 * - Shows a random quote on load
 * - Allows manual quote refresh
 * 
 * Quotes are loaded from quotes.json
 * 
 * Uses Alpine.js
 */

import quotes from '../data/quotes.json';
const zenQuotes = quotes.zenQuotes;
---

<style>
    /* 
    * Hide elements during Alpine.js initialization
    */
    [x-cloak] { 
        display: none !important; 
    }
    
    /* 
    * Quote transitions
    */
    .quote-enter {
        opacity: 0;
        transform: translateY(10px);
    }
    
    .quote-enter-active {
        opacity: 1;
        transform: translateY(0);
        transition: opacity 300ms ease-out, transform 300ms ease-out;
    }
    
    .quote-leave {
        opacity: 1;
        transform: translateY(0);
    }
    
    .quote-leave-active {
        opacity: 0;
        transform: translateY(-10px);
        transition: opacity 300ms ease-in, transform 300ms ease-in;
    }
</style>

<!-- Main Container -->
<div 
    x-data={`{
        quotes: ${JSON.stringify(zenQuotes)},
        currentQuote: null,
        
        init() {
            this.currentQuote = this.quotes[Math.floor(Math.random() * this.quotes.length)];
        },
        
        nextQuote() {
            const oldQuote = this.currentQuote;
            let newQuote;
            
            do {
                newQuote = this.quotes[Math.floor(Math.random() * this.quotes.length)];
            } while (newQuote === oldQuote && this.quotes.length > 1);
            
            this.currentQuote = newQuote;
        }
    }`}
    x-init="init()"
    class="max-w-2xl mx-auto p-6 bg-white dark:bg-slate-800 rounded-lg shadow-lg"
>
    <div class="flex flex-col items-center space-y-4">
        <div 
            x-show="currentQuote"
            x-transition:enter="quote-enter"
            x-transition:enter-start="quote-enter"
            x-transition:enter-end="quote-enter-active"
            x-transition:leave="quote-leave"
            x-transition:leave-start="quote-leave"
            x-transition:leave-end="quote-leave-active"
            class="text-center"
        >
            <p class="text-xl italic text-gray-800 dark:text-gray-200 mb-3" x-text="currentQuote?.text"></p>
            <p class="text-sm text-gray-600 dark:text-gray-400" x-text="'- ' + currentQuote?.author"></p>
        </div>
        
        <button 
            @click="nextQuote"
            class="px-4 py-2 text-sm bg-stone-200 dark:bg-slate-700 text-gray-800 dark:text-white rounded-lg hover:bg-stone-300 dark:hover:bg-slate-600 transition-colors"
        >
            New Quote
        </button>
    </div>
</div>

<script is:inline>
    // No script needed
</script>